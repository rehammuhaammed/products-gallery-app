<!-- ====== Hero Section ====== -->
<section class="relative w-full p-5  overflow-hidden">

  <owl-carousel-o [options]="FadeOptions">
    <ng-template carouselSlide>
      <img 
        src="images/banner1.jpg" 
        class="w-full max-h-[300px] sm:max-h-[500px] object-cover rounded-xl transition-all duration-500"
      />
    </ng-template>  
    <ng-template carouselSlide>
      <img 
        src="images/banner2.webp" 
        class="w-full max-h-[300px] sm:max-h-[500px] object-cover rounded-xl transition-all duration-500" 
      />
    </ng-template>  
    <ng-template carouselSlide>
      <img 
        src="images/banner3.jpg" 
        class="w-full max-h-[300px] sm:max-h-[500px] object-cover rounded-xl transition-all duration-500" 
      />
    </ng-template>  
    <ng-template carouselSlide>
      <img 
        src="images/banner2.webp" 
        class="w-full max-h-[300px] sm:max-h-[500px] object-cover rounded-xl transition-all duration-500" 
      />
    </ng-template>  
  </owl-carousel-o>
</section>


@if (error()) {
  <div class="flex flex-col items-center justify-center py-24 text-center text-[#7c2d12]">
    <h2 class="text-2xl sm:text-3xl font-bold mb-2">Oops! Something went wrong</h2>

    <p class="text-gray-500 text-sm mb-4 max-w-md">
      {{ 'An unexpected error occurred while loading the content. Please try again later.' }}
    </p>

    <button
      (click)="reloadPage()"
      class=" cursor-pointer px-5 py-2 rounded-xl bg-[#be8c62] text-white hover:bg-[#a9764f] transition"
    >
      Try Again
    </button>
  </div>
}@else {
<!-- ====== Products Section ====== -->
<section class="max-w-[1980px] mx-auto my-5 px-5 sm:px-5 md:px-6 lg:px-8">

  <h3 class="text-2xl sm:text-3xl md:text-4xl text-maintext font-semibold mb-6 text-center dark:text-mainBg">
    {{ 'home.popularProducts' | translate }}
  </h3>

   <input 
      type="text" 
      [(ngModel)]="searchItem"  
      [placeholder]="'home.searchPlaceholder' | translate"
      class="w-[70%] mx-auto placeholder:text-sm placeholder:font-medium text-maintext px-4 py-2 border block border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-maintext dark:focus:ring-mainBg dark:bg-[#ceb991]  dark:text-[#f9fbfc]"
    />

    
<div class="flex flex-col sm:flex-row items-center justify-between  px-17 py-4 ">
    <div class=" text-base  font-medium mb-3 sm:mb-0">
       
    </div>

  <div class="relative w-56 ">
  <button
    type="button"
    class="w-full  bg-[#f9fbfc]  text-maintext px-4 py-2 rounded-xl shadow-sm text-sm font-medium flex items-center justify-around focus:outline-none cursor-pointer transition dark:bg-[#ceb991]  dark:text-[#f9fbfc]"
    (click)="isOpen = !isOpen"
  >
    {{'sort.sortby'|translate}} :
    <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" stroke-width="2"
         viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>
    </svg>
  </button>

  @if(isOpen){
    <div
    class="absolute z-10 mt-2 w-full bg-white border border-gray-200 rounded-xl shadow-lg text-sm overflow-hidden"
  >
    <ul class="text-maintext">
  <li class="px-4 py-2 hover:bg-[#e6f0f7] cursor-pointer" 
      (click)="setoption('Default')">{{'sort.Default'|translate}}</li>
  <li class="px-4 py-2 hover:bg-[#e6f0f7] cursor-pointer" 
      (click)="setoption('Price: Low to High')">{{'sort.l-h'|translate}}</li>
  <li class="px-4 py-2 hover:bg-[#e6f0f7] cursor-pointer" 
      (click)="setoption('Price: High to Low')">{{'sort.h-l'|translate}}</li>
  <li class="px-4 py-2 hover:bg-[#e6f0f7] cursor-pointer" 
      (click)="setoption('A â†’ Z')">{{'sort.a-z'|translate}}</li>
</ul>
  </div>
  }
</div>

</div>


  <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-5 md:gap-5 lg:gap-8 my-5">
    @for (product of myProducts | search : searchItem | sort : sortOption; track product.id) {
      <div class="group bg-[#FAF6F3] text-maintext rounded-xl shadow-lg p-4 transition-transform duration-300 transform hover:scale-105 cursor-pointer dark:bg-[#ceb991]  dark:text-[#f9fbfc] ">
        <div [routerLink]="['/details', product.id]">
          <div>
            <img class="w-full h-[220px] sm:h-[250px] md:h-[270px] object-contain rounded-xl" [src]="product.image" alt="">
          </div>
          <div class="px-2 py-3">
            <h4 class="text-sm ">{{ product.category }}</h4>
            <h3 class="text-base font-semibold">{{ product.title.split(' ').slice(0,3).join(' ') }}</h3>
            <div class="flex justify-between items-center mt-2">
              <span class="font-bold">{{ product.price }} {{ 'home.priceUnit' | translate }}</span>
              <div class="flex items-center gap-1">
                <i class="fas fa-star text-[#f8d17c]"></i>
                <span class="text-sm">{{ product.rating.rate }}</span>
              </div>
            </div>
          </div>
        </div>

        <a 
          (click)="addToCart(product)" 
          class="block text-center mt-3 w-full py-2 text-sm bg-buttonbg text-white rounded-lg hover:bg-[#be8c62]/90 transition"
        >
          {{ 'home.addToCart' | translate }}
        </a>
      </div>
    }
  </div>
</section>
}

